{"version":3,"sources":["lib/plugins/chest.js"],"names":["Vec3","require","module","exports","player","on","opt","cancel","crouching","world","getBlockType","reference","id","plus","blockAbove","playSound","_client","write","windowId","inventoryType","windowTitle","slotCount","setTimeout"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAMA,OAAOC,QAAQ,MAAR,EAAgBD,IAA7B;;AAEAE,OAAOC,OAAP,CAAeC,MAAf,GAAsB,UAASA,MAAT,EACtB;AAAA;;AACEA,SAAOC,EAAP,CAAU,mBAAV;AAAA,wFAA+B,iBAAOC,GAAP,EAAYC,MAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACzBH,OAAOI,SADkB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA;AAAA,qBAGVJ,OAAOK,KAAP,CAAaC,YAAb,CAA0BJ,IAAIK,SAA9B,CAHU;;AAAA;AAGrBC,gBAHqB;AAAA;AAAA,qBAIFR,OAAOK,KAAP,CAAaC,YAAb,CAA0BJ,IAAIK,SAAJ,CAAcE,IAAd,CAAmB,IAAIb,IAAJ,CAAS,CAAT,EAAY,CAAZ,EAAe,CAAf,CAAnB,CAA1B,CAJE;;AAAA;AAIrBc,wBAJqB;;AAAA,oBAKvBF,MAAM,EALiB;AAAA;AAAA;AAAA;;AAMzBN,kBAAIS,SAAJ,GAAgB,KAAhB;;AANyB,mBAOrBD,UAPqB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAUzBV,qBAAOY,OAAP,CAAeC,KAAf,CAAqB,aAArB,EAAoC;AAClCC,0BAAU,GADwB;AAElCC,+BAAe,iBAFmB;AAGlCC,6BAAa,yBAAe,OAAf,CAHqB;AAIlCC,2BAAW,IAAI,CAAJ,GAAQ,CAJe,CAIb;AAJa,eAApC;AAMAd;;AAhByB;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAoB3Be,yBAAW,YAAK;AAAC;AAAW,eAA5B,EAA6B,CAA7B;;AApB2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA/B;;AAAA;AAAA;AAAA;AAAA;AAwBD,CA1BD","file":"../../../lib/plugins/chest.js","sourcesContent":["const Vec3 = require(\"vec3\").Vec3;\n\nmodule.exports.player=function(player)\n{\n  player.on('placeBlock_cancel', async (opt, cancel) => {\n    if (player.crouching) return;\n    try {\n      const id = await player.world.getBlockType(opt.reference);\n      const blockAbove = await player.world.getBlockType(opt.reference.plus(new Vec3(0, 1, 0)));\n      if (id == 54) {\n        opt.playSound = false;\n        if (blockAbove) {\n          return;\n        }\n        player._client.write(\"open_window\", {\n          windowId: 165,\n          inventoryType: \"minecraft:chest\",\n          windowTitle: JSON.stringify(\"Chest\"),\n          slotCount: 9 * 3 + 8 // 3 rows, make nicer later\n        });\n        cancel();\n      }\n    }\n    catch(err) {\n      setTimeout(() =>{throw err;},0);\n    }\n    \n  });\n};"]}