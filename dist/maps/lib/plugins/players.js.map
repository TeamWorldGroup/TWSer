{"version":3,"sources":["lib/plugins/players.js"],"names":["module","exports","server","serv","entityMaxId","players","uuidToPlayer","entities","getPlayer","found","filter","pl","username","length","player","commands","add","base","aliases","info","usage","op","parse","str","results","match","parseInt","action","mode","setGameMode","diff","_writeAll","difficulty"],"mappings":";;AAAAA,OAAOC,OAAP,CAAeC,MAAf,GAAsB,UAASC,IAAT,EACtB;AACEA,OAAKC,WAAL,GAAiB,CAAjB;AACAD,OAAKE,OAAL,GAAa,EAAb;AACAF,OAAKG,YAAL,GAAkB,EAAlB;AACAH,OAAKI,QAAL,GAAc,EAAd;;AAEAJ,OAAKK,SAAL,GAAiB,oBAAY;AAC3B,QAAMC,QAAMN,KAAKE,OAAL,CAAaK,MAAb,CAAoB;AAAA,aAAMC,GAAGC,QAAH,IAAeA,QAArB;AAAA,KAApB,CAAZ;AACA,QAAGH,MAAMI,MAAN,GAAa,CAAhB,EACE,OAAOJ,MAAM,CAAN,CAAP;AACF,WAAO,IAAP;AACD,GALD;AAMD,CAbD;;AAeAT,OAAOC,OAAP,CAAea,MAAf,GAAsB,UAASA,MAAT,EAAiBX,IAAjB,EAAsB;AAC1CW,SAAOC,QAAP,CAAgBC,GAAhB,CAAoB;AAClBC,UAAM,UADY;AAElBC,aAAS,CAAC,IAAD,CAFS;AAGlBC,UAAM,qBAHY;AAIlBC,WAAO,iBAJW;AAKlBC,QAAI,IALc;AAMlBC,SANkB,iBAMZC,GANY,EAMP;AACT,UAAIC,gBAAJ;AACA,UAAG,EAAEA,UAAUD,IAAIE,KAAJ,CAAU,WAAV,CAAZ,CAAH,EACE,OAAO,KAAP;AACF,aAAOC,SAASH,GAAT,CAAP;AACD,KAXiB;AAYlBI,UAZkB,kBAYXC,IAZW,EAYL;AACXd,aAAOe,WAAP,CAAmBD,IAAnB;AACD;AAdiB,GAApB;;AAiBAd,SAAOC,QAAP,CAAgBC,GAAhB,CAAoB;AAClBC,UAAM,YADY;AAElBC,aAAS,CAAC,MAAD,CAFS;AAGlBC,UAAM,2BAHY;AAIlBC,WAAO,0BAJW;AAKlBC,QAAI,IALc;AAMlBC,SANkB,iBAMZC,GANY,EAMR;AACR,UAAIC,gBAAJ;AACA,UAAG,EAAEA,UAAUD,IAAIE,KAAJ,CAAU,WAAV,CAAZ,CAAH,EACE,OAAO,KAAP;AACF,aAAOC,SAASH,GAAT,CAAP;AACD,KAXiB;AAYlBI,UAZkB,kBAYXG,IAZW,EAYN;AACV3B,WAAK4B,SAAL,CAAe,YAAf,EAA6B,EAACC,YAAYF,IAAb,EAA7B;AACA3B,WAAK6B,UAAL,GAAkBF,IAAlB;AACD;AAfiB,GAApB;AAiBD,CAnCD","file":"../../../lib/plugins/players.js","sourcesContent":["module.exports.server=function(serv)\n{\n  serv.entityMaxId=0;\n  serv.players=[];\n  serv.uuidToPlayer={};\n  serv.entities={};\n\n  serv.getPlayer = username => {\n    const found=serv.players.filter(pl => pl.username == username);\n    if(found.length>0)\n      return found[0];\n    return null;\n  };\n};\n\nmodule.exports.player=function(player, serv){\n  player.commands.add({\n    base: 'gamemode',\n    aliases: ['gm'],\n    info: 'to change game mode',\n    usage: '/gamemode <0-3>',\n    op: true,\n    parse(str) {\n      let results;\n      if(!(results = str.match(/^([0-3])$/)))\n        return false;\n      return parseInt(str);\n    },\n    action(mode) {\n      player.setGameMode(mode);\n    }\n  });\n\n  player.commands.add({\n    base: 'difficulty',\n    aliases: ['diff'],\n    info: 'Sets the difficulty level',\n    usage: '/difficulty <difficulty>',\n    op: true,\n    parse(str){\n      let results;\n      if(!(results = str.match(/^([0-3])$/)))\n        return false;\n      return parseInt(str);\n    },\n    action(diff){\n      serv._writeAll('difficulty', {difficulty: diff});\n      serv.difficulty = diff;\n    }\n  });\n};\n"]}