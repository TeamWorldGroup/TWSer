{"version":3,"sources":["lib/plugins/weather.js"],"names":["UserError","require","module","exports","player","serv","commands","add","base","info","usage","op","parse","str","args","split","length","condition","indexOf","action","_writeAll","reason","gameMode"],"mappings":";;AAAA,IAAMA,YAAYC,QAAQ,cAAR,EAAwBD,SAA1C;;AAEAE,OAAOC,OAAP,CAAeC,MAAf,GAAwB,UAASA,MAAT,EAAiBC,IAAjB,EAAuB;AAC7CD,SAAOE,QAAP,CAAgBC,GAAhB,CAAoB;AAClBC,UAAM,SADY;AAElBC,UAAM,mBAFY;AAGlBC,WAAO,uBAHW;AAIlBC,QAAI,IAJc;AAKlBC,SALkB,iBAKZC,GALY,EAKP;AACT,UAAMC,OAAOD,IAAIE,KAAJ,CAAU,GAAV,CAAb;AACA,UAAGD,KAAKE,MAAL,IAAa,CAAhB,EACE,OAAO,KAAP;;AAEF,UAAIC,YAAYH,KAAK,CAAL,CAAhB;AACA,UAAG,CAAC,OAAD,EAAS,MAAT,EAAiBI,OAAjB,CAAyBD,SAAzB,KAAqC,CAAC,CAAzC,EACE,OAAO,KAAP;;AAEF,aAAO,EAACA,WAAUA,SAAX,EAAP;AACD,KAfiB;AAgBlBE,UAhBkB,wBAgBC;AAAA,UAAXF,SAAW,QAAXA,SAAW;;AACjB,UAAGA,aAAa,MAAhB,EAAuB;AACrBZ,aAAKe,SAAL,CAAe,mBAAf,EAAmC,EAACC,QAAO,CAAR,EAAUC,UAAS,CAAnB,EAAnC;AACD,OAFD,MAEO,IAAGL,aAAa,OAAhB,EAAyB;AAC9BZ,aAAKe,SAAL,CAAe,mBAAf,EAAmC,EAACC,QAAO,CAAR,EAAUC,UAAS,CAAnB,EAAnC;AACD;AACF;AAtBiB,GAApB;AAwBD,CAzBD","file":"../../../lib/plugins/weather.js","sourcesContent":["const UserError = require('flying-squid').UserError;\n\nmodule.exports.player = function(player, serv) {\n  player.commands.add({\n    base: 'weather',\n    info: 'Sets the weather.',\n    usage: '/weather <clear|rain>',\n    op: true,\n    parse(str) {\n      const args = str.split(' ');\n      if(args.length!=1)\n        return false;\n\n      let condition = args[0];\n      if([\"clear\",\"rain\"].indexOf(condition)==-1)\n        return false;\n\n      return {condition:condition};\n    },\n    action({condition}){\n      if(condition == 'rain'){\n        serv._writeAll('game_state_change',{reason:2,gameMode:0});\n      } else if(condition == 'clear') {\n        serv._writeAll('game_state_change',{reason:1,gameMode:0});\n      }\n    }\n  })\n};\n"]}